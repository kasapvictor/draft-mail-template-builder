import { minify as htmlMinify } from "html-minifier";
import mjml2html from "mjml";
import { renderToMjml } from "./renderToMjml";
export function render(email, options = {}) {
    const defaults = {
        keepComments: false,
        beautify: false,
        validationLevel: "strict",
    };
    const parseResults = mjml2html(renderToMjml(email), {
        ...defaults,
        ...options,
        minify: undefined,
    });
    if (options.minify) {
        return {
            html: htmlMinify(parseResults.html, {
                caseSensitive: true,
                collapseWhitespace: true,
                minifyCSS: true,
                removeComments: true,
                removeEmptyAttributes: true,
            }),
        };
    }
    return parseResults;
}
